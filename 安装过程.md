

## gerrisInstallation



#### 原因：

由于打工仔上班过程中需要用到gerris，而自己去网上搜了一下，只有一个gerris的官网和csdn上一位老哥的翻译，安装教程非常少，所以心血来潮想把自己的安装经历记录一下，如果以后有人想安装gerris，可以作为参考，但是本人也只是刚接触linux，教程可能有很多问题，在学linux中，如果有不完善的步骤后续会进行更新



[csdn](https://blog.csdn.net/weixin_43921223/article/details/104734135)

[gerris官网](http://gfs.sourceforge.net/wiki/index.php/Main_Page )



### 个人系统环境：虚拟机+ubuntu

虚拟机：vm12

ubuntu:版本20.1



### 安装过程：



#### linux系统的相关配置：

安装完ubuntu后，根据官网的页面的教程[gerris完成linux安装后](http://gfs.sourceforge.net/wiki/index.php/Ubuntu/Debian_installation)，如下操作：

1. **获得key**

```
wget http://gerris.dalembert.upmc.fr/debian/popinet_key.asc
```

```
sudo apt-key add popinet_key.asc
```

2. 根据安装linux版本选择对应的语句，我百度了一下，这语句是软件安装源的意思，复制对应的语句后，将对应的语句添加到sources.list文件下`/etc/apt/sources.list`

由于我的系统是ubuntu，但是是20年版本的，而官网上只给了16年的两个版本的源，我也不知道有没有用，所以就把两个都添加了，只不过好像两个都没有用，但不影响安装，我个人认为这个只是负责gerris更新的，官网都这么多年没更新了，更不更新也无所谓吧

3. 打开universe

   进入设置，点最下面的关于，再双击关于里面的software update，会自动打开universe，就是打开界面的第二个选项

4. 更新APT和安装包

   ```
   sudo apt-get update
   sudo apt-get install {gerris,gfsview}-snapshot
   ```

5. 更新

   这玩意我记得是更新不了的，因为源不对，更新也只是更新linux的其他软件，gerris更新个寂寞

   ```
   sudo apt-get update
   sudo apt-get dist-upgrade
   ```

   



### 正式安装

1. 安装glib开发文件

   先检查有没有安装过，如果有，会返回一个版本号

   ```
   pkg-config glib-2.0 --modversion
   ```

   如果没有，则用下面语句安装

   ```
   sudo apt-get install libglib2.0-dev
   ```

   依赖包安装

   ```
   sudo apt-get install libglib2.0-dev libnetpbm10-dev m4 libproj-dev \libgsl0-dev libnetcdf-dev libode-dev libfftw3-dev libhypre-dev libgtkglext1-dev libstartup-notification0-dev ffmpeg
   ```

   如果要装MPI，则

   ```
   sudo apt-get install libopenmpi-dev
   ```

2. 选择libraries的安装位置

   这个貌似上面就已经默认安装了？（我也不是很清楚哈哈，毕竟刚接触linux，小白一个）

3. 安装GTS

   GTS，Gerris，Gfsview下载网址`http://gfs.sourceforge.net/wiki/index.php/Download`，我把三个的source tarball都下载下来了，这里建议在linux系统用浏览器下载，如果在Windows下载的话，还需要用共享文件夹将Windows下载的三个文件传给linux，有点不方便

   

   下载完之后，可以在`/user/local`下建立一个文件夹，相当于安装目录的意思

   

   解压GTS，Gerris，Gfsview对应的压缩包，这里文件都是带着snapshot的，问题不大

   官网上的安装步骤为

   ```
   % cd gts
   % ./configure (--prefix=... is optional)
   % make
   % sudo make install 
   ```

   但实际上我安装的是这样的

   ```
   % cd Downloads/gts-snapshot/gts-snapshot-121130/     
   % ./configure --prefix= usr/local/gerris
   % make
   % sudo make install 
   ```

   第一行是因为我的安装包的下载路径和解压的路径都在这，所以打开的是相对应的目录，这个根据自己的解压包位置打开相应的目录（==一定要打开到最底层的文件夹，就是显示debain,doc的目录==）

   第二行 prefix=后面是我自己想在对应位置安装的目录，根据自身情况改相应目录

   后面两行正常安装就行

   

   3.1  用`sudo gedit /etc/ld.so.conf`将 `/usr/local/lib`添加进去

   然后执行

   ```
   sudo /sbin/ldconfig
   ```

   （这一步忘了有没有出现问题了）

   

4. 安装gerris

   安装并行库文件

   ```
   sudo apt-get install openmpi-bin libopenmpi-dev
   ```

   后续安装操作和GTS一样

   看教程是需要再次用3.1的方法，但是我没用好像也没出问题？

   查看版本号

   ```
   gerris2D -V
   ```

5. 安装gfs

   安装OpenGl开发文件

   ```
   sudo apt-get install libgtk2.0-dev libgtkglext1-dev libstartup-notification0-dev libftgl-dev
   ```

   安装OSMesa

   ```
   sudo apt-get install libosmesa6-dev
   ```

   后续安装操作同上

